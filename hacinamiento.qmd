# Hacinamiento

```{r}
#| label: librerias_hacinamiento
#| include: false

library(tidyverse)
library(here)
library(haven)
library(gtsummary)
library(labelled)

theme_gtsummary_language(
  language = "es")

```

```{r}
i_am("hacinamiento.qmd")
```

A continuación, a modo de ejemplo de como complementar un dato primario con otro secundario, se hará un análisis que utilice tanto datos de la encuesta (como fuente primaria) como algunos datos del censo de 2010 (como fuente secundaria). El tema a tratar será el del hacinamiento.

## Insumos de la encuesta

```{r}
#| label: vivienda_insumo
#| warning: false
# Levanto el dataset de la encuesta

df_encuesta <- read_rds(here::here("Outputs", "df_encuesta.rds"))
```

En la encuesta existe un módulo de "vivienda" en donde se encuentran una serie de preguntas que refieren a la vivienda del encuestado. Algunas tienen más que ver con la ubicación de la vivienda (calle, altura, etc.) y sirven para georreferenciar a los encuestados. Otras tienen que ver con características constructivas de la vivienda (piso, baño, cantidad de habitaciones, etc), otras con la relación legal del hogar con la vivienda (dueño, inquilino, etc.). La encuesta también contiene un pequeño módulo sobre el "hogar" en donde se incluyen preguntas como la cantidad y tipo de personas que conforman el hogar. En este sentido, el hogar se entiende como algo diferenciable de la vivienda y en una misma vivienda puede haber más de un hogar. En efecto, la [definición que utiliza el INDEC](https://drive.google.com/file/d/1F99YoFJ8eb2Nz-FJiMSV1muZ67IzZ_6l/view?usp=sharing "Link al manual de definiciones del INDEC"){target="_blank"} para hogar es la de persona o grupo de personas, parientes o no, que viven bajo el mismo techo y comparten los gastos de alimentación [@indec, pag. 4].

Con este tipo de preguntas se puede construir un indicador relativamente difundido en las ciencias sociales como es el indicador de **hacimamiento**. Este se calcula para hogares y, de manera transitiva, luego se puede calcular para las personas. Existen varias definiciones operacionales (o criterios de medición) del concepto de hacinamiento aunque como idea general se puede afirmar que en cualquier definición de hacinamiento hay una relación explícita entre la cantidad y tipos de ambientes de la vivienda y la cantidad y tipo de miembros del hogar. Aunque muchas veces la relación anterior quede alga opacada por la discusión de cual es el punto de corte óptimo, lo que existe por detrás de la definición es la creencia (más o menos justificada según el caso) que el hacinamiento posee riegos asociados con efectos consideras como negativos y que estos se deben, en parte, al inadecuado espacio dentro del vivienda para dormir y, más en general, al inadecuado espacio para realizar otras actividades dentro de la vivienda como estudiar, socializar, etc.. En este sentido, la pandemia de COVID-19 puso de relieve no sólo la cuestión de la (falta de) disponibilidad de dispositivos tecnológicos sino también la cuestion de la (falta de) disponibilidad de espacio para realizar algunas tareas en la casa como el trabajo y/o el estudio.

Es interesante volver a destacar que no sólo importa el "punto de corte" a partir del cual se considera hacinamiento (¿2 personas por ambiente?, ¿3 por ambiente?) sino también:

a\) el tipo de ambiente (¿se debe contar sólo aquellos que se utilizan para dormir?) y

b\) el tipo de relación entre los miembros (no es lo mismo que en una habitación duerman una "pareja" que 2 hermanos entre 12 y 17 años de diferente sexo ...aunque en ambos casos la cantidad de personas sean 2).

En Argentina históricamente se le ha dado importancia al tipo de ambiente pero en Europa desde hace varias décadas también se calcula en base al tipo de relaciones entre los miembros del hogar.

Idealmente, la discusión sobre el punto de corte, más que explicitarse (como lo suguiere la típica idea de la definición operacional), debería justificarse en base a (otras) investigaciones empíricas que validen que ese criterio utilizado es mejor que otros criterios alternativos/competidores en cuanto a predecir algún valor considerado como *gold standard* en el mediano/largo plazo. Esto es un ejemplo de lo que se suele denominar **validación de criterio** en las ciencias sociales.

::: {#sec-hacinamiento_historia .callout-note collapse="true"}
## Historia del concepto de hacinamiento

A diferencia de otros conceptos más neutros en su terminología , el concepto de **hacinamiento** (*overcrowding*) posee una connotación negativa en el mismo sentido que el concepto de **pobreza**. Consecuentemente, se suelen utilizar para construir proposiciones en donde se evidencien sus efectos negativos en diferentes dominios de la realidad social. En otras palabras, a mayor hacinamiento se esperan mayores efectos negativos en otras dimensiones.

Por otro lado, el concepto de hacinamiento tiene una relación íntima con el concepto de **densidad** **poblacional***.* Sin embargo, este último no contiene, de modo necesario, una connotación negativa como el primero. En ambos se encuentra por detras la idea de relacionar aspectos poblacionales (p.e. cantidad de personas en un hogar en el primero y cantidad de personas en determinada administrativa en el segundo) con algún aspecto que implique alguna restricción espacial (p.e. cantidad de habitaciones en el primero, cantidad de kilómetros cuadrados en el segundo).

::: panel-tabset
## Hacinamiento

![](Inputs/Images/hacinamiento_groucho.jpg)

## Densidad poblacional

![](Inputs/Images/densidad_edificios.jpg)
:::

En efecto, es después del crecimiento de las ciudades fabriles de la revolución industrial y la difusión de la hipótesis Malthusiana sobre el crecimiento de la población, que las ideas de hacinamiento y densidad poblacional se comienzan a relacionar más explícitamente. Pero cabe destacar que, al menos desde un punto de vista metodológico, guardan una importante diferencia. La densidad poblacional refiere sobre unidades administrativas y el hacinamiento predica sobre los hogares. Esto permite que la densidad poblacional de una unidad administrativa se pueda calcular con datos agregados de esa unidad administrativa mientras que para el cálculo de la tasa de hacinamiento de esa misma unidad administrativa se necesita relacionar la cantidad de personas con la cantidad de ambientes de **cada una** de sus viviendas.

Hasta mediados del siglo XX, cuando todavía no se preguntaba por la cantidad de personas y ambientes en la vivienda en muchos censos, era usual utilizar el valor de la densidad poblacional como un indicador del hacinamiento. Si bien puede ser una decisión razonable en contextos de escases de información, esa estrategia contiene el problema metodológico de la [falacia ecológica](https://es.wikipedia.org/wiki/Falacia_ecol%C3%B3gica "Ir a falacia ecológica").

La situación anterior cambió bastante cuando, a mediados del siglo XX una nueva ola de investigaciones, con origen en la biología, encontraron a través de diseños experimentales una relación positiva entre convivir con otros animales en un hábitat pequeño y aumento de la agresión y la aparición de enfermedades [@calhoun1962]. Este tipo de investigaciones generaron un renovado interés en el concepto de hacinamiento en las ciencias sociales por lo que se incorporaron estas preguntas en muchos censos de población e, interesante desde un punto de vista metodológico, generó una mayor cantidad de investigaciones en base a encuestas, algunas de las cuales se aplicaron con diseños longitudinales [@solari2012].

Para cerrar se destaca que, al menos en muchas sociedades urbanas modernas, los problemas que se relacionan con el hacinamiento también están asociados con la pobreza por lo que es (más) difícil determinar algunas relaciones de causalidad. En otros casos, como el ejemplo de la foto de los edificios, existe alta densidad poblacional pero bajo hacinamiento en parte porque también hay baja pobreza. En otros casos, por ejemplo en regiones muy poco pobladas (piénsense en zonas muy frías como la Antártida o el Ártico) hay muy poca densidad poblacional y alto hacinamiento, pero ese tipo de hacinamiento no parece generar mayores problemas ni en la salud ni en la socialización.
:::

## Explorando el dato primario

Un punto metodológico interesante del concepto de hacinamiento, al menos antes de la decisión de considerar un punto de corte a partir del cual un hogar se considera hacinado, es que se puede considerar como un ejemplo de concepto cuantitativo [@klimovsky1998, pag. 252-257]. Entre otras características, podremos con el realizar legítimamente una serie de operaciones matemáticas (dividir, multiplicar, etc.) asumiendo que los valores de esas operaciones "representan" valores de los objetos medidos. En el caso específico del concepto de hacinamiento lo anterior es posible porque su medición empírica implica la medición previa de 2 variables con un nivel de medición de "razón" para recién después realizar el respectivo cálculo. En este sentido, también se suele afirmar que hacinamiento es un ejemplo de una **variable compuesta** o **índice** ya que el hacinamiento, como variable, se "calcula" más que "medirse". Lo que se mide, a través de operaciones empíricas, son los indicadores que operan de insumo (p.e. cantidad de habitaciones, cantidad de personas).

Esta característica pueder servir para mostrar el siguiente problema: ¿Se puede calcular un índice de hacinamiento relacionando las cantidades *agregadas* de habitaciones y personas de un determinado territorio? ¿El resultado es el mismo si se calcula para cada hogar? ¿Si hay diferencias, cuál es el valor correcto?. Que el resultado sea igual de manera agregada o desagregada es una contingencia empírica y no tiene nada necesario tanto para que sea igual, aproximadamente similiar o muy diferentes. Puede ser muy similar pero puede que no, por lo que es necesario pensar cual es el valor correcto. Aquí la clave está en el término *agregado* lo que invita a pensar en cual es/son el/los referente/s del concepto que se agrega/n ¿Son los hogares? ¿Son cada uno de los individuos que componen esos hogares? ¿En qué sentido se puede afirmar que un barrio se encuentra hacinado o, por lo menos, más o menos hacinado que otro barrio?. En principio, esto se debería resolver con un análisis conceptual inpeccionando las definiciones de los conceptos utilizados. Como se detalla en la nota de arriba sobre la historia del concepto de hacinamiento el mismo refiere a los hogares, por lo que para su cálculo se debe tener, al mismo tiempo, la información de la cantidad de habitaciones de la vivienda y la cantidad de personas que componen el hogar.

A modo de ejemplo, a continuación se calcula la media de hacinamiento tanto de manera agregada como de manera desagregada.

```{r}
#| label: hacinamiento_media_desagregada

df_encuesta = df_encuesta |>
mutate(hacinamiento = hog_n_miembros_hogar/viv_n_ambientes) |>
set_variable_labels(hacinamiento = "Hacinamiento")

tb_hacinamiento = df_encuesta |>
  tbl_continuous(
    variable = hacinamiento,
    include = sexo)

tb_hacinamiento
```

```{r}
#| label: hacinamiento_media_agregada
#| echo: false

td_hacinamiento <- df_encuesta |>
select(viv_n_ambientes, hog_n_miembros_hogar) |>
#mutate(across(c(viv_n_ambientes, viv_n_amb_dormir), ~ as.integer(.))) |>
#copy_labels_from(df_encuesta) |>
tbl_summary(
type = list(c(viv_n_ambientes, hog_n_miembros_hogar) ~ "continuous2"),
statistic = list(all_continuous2() ~  c(
  "{mean}",
  "{median}",
  "{p25}-{p75}")))

td_hacinamiento

testing1 <- as.numeric(inline_text(td_hacinamiento, variable = viv_n_ambientes))
testing2 <- as.numeric(inline_text(td_hacinamiento, variable = hog_n_miembros_hogar))

testing3 <- round(testing2/testing1, 2)
```

A continuación se realizará un análisis que muestra diferentes medidas de tendencia central en función del nivel de medición de las variables. Recordar el nivel de medición de las variables es importante para pensar que medida de tendencia central es apropiada calcular. En el caso de los conceptos de cantidad de ambientes, cantidad de habitaciones para dormir y la cantidad de miembros del hogar, la idea de número parece apropiada para representar esas variables. Más especificamente, el concepto de [número natural](https://es.wikipedia.org/wiki/N%C3%BAmero_natural "Ir a número natural") parece servir para representar correctamente sus propiedades. Esto se debe a que, en este contexto no tiene sentido afirmar:

a\) Que exista una cantidad de ambientes negativa (-3 ambientes)

b\) Que la cantidad de ambientes y personas pueda ser continua (no hay algo como 1,5 ambientes o personas).

Las características anteriores son esenciales en la idea de frecuencia y se puede entender como el producto de realizar la operación empírica de contar. En esos casos se dice que la variable posee un nivel de medición de razón. ¿Porqué de razón? Justamente porque se puede aplicar, de manera legítima, la operación aritmética de dividir (*ratio*). Esta característica es la que explotan los conceptos de hacinamiento y el de densidad de población.

Volviendo a la cuestión del análisis univariado, a continuación se presentan las medias aritméticas para el caso de las variables de razón y el porcentaje para la variable que detecta la presencia ("SI/NO") de un ambiente exclusivo para el estudio.

```{r}

```

Con los resultados de la tabla anterior a la mano uno se ve tentado de relacionar, más precisamente de dividir, la media de la cantidad de ambientes para dormir (`` `r testing1` ``) sobre la media de la cantidad de miembros del hogar (`` `r testing2` ``). Esta cuentita da que hay `` `r testing3` `` personas por cada ambiente para dormir. Si es por la cuestión de los niveles de medición la operación anterior es legítima. El problema es que el concepto de hacinamiento está pensado para ser calculado para cada hogar por separado y luego, por una cuestión transitiva, imputarlo a cada miembro de ese hogar si se quiere calcular cuantas personas viven hacinadas.

No se trata simplemente de dividir con , respectively

## Combinando con datos censales

Una de las fuentes secundarias por excelencia, no sólo en Argentina sino en la mayoría de los países, son los Censos nacionales de población. En este caso, utlizaremos los datos del censo del 2010.

```{r}
#| label: insumo_censo
#| eval: false

# La idea es agarrar el csv de las personas y convertirlo a parquet file
# Esto lo hago una sola vez y dejo el código pero en próximas corridas sólo se utiliza como insumo el producto del código anterior

library(arrow)
censo_persona_csv <- read_csv(here("Inputs", "PERSONA.csv"))
censo_persona_arrow <- read_csv_arrow(here("Inputs", "PERSONA.csv"))
censo_persona_sav <- read_spss(here("Inputs", "PERSONA.sav"))

 read_csv_arrow()
df_encuesta <- read_rds(here::here("Outputs", "df_encuesta.rds"))
```
