# Complementación con fuentes secundarias

## Hacinamiento

```{r}
library(tidyverse)
library(here)
library(haven)
library(gtsummary)
```

Uno de los objetivos de la materia es, sin duda, aportar herramientas que permitan la producción de un dato primario de calidad. Sin embargo, también es cierto que una de las maneras de agregarle valor a cualquier dato primario es su pertinente combinación con algún otro dato secundario. Por último, especialmente en los casos en donde, por las razones que sean, es inviable la producción de un mejor dato primario o en los casos en donde el dato necesario ya existe en forma de datos secundario, el uso de fuentes secundarias es la mejor opción.

Por una cuestión pedagógica a continuación se hará un análisis que utilice tanto datos de la encuesta (como fuente primaria) como datos del censo de 2010 (como fuente secundaria).

## Insumos de la encuesta

```{r}
#| label: vivienda_insumo
#| warning: false
# Levanto el dataset de la encuesta

df_encuesta <- read_rds(here::here("Outputs", "df_encuesta.rds"))
```

En la encuesta existe un módulo de "vivienda". En él existen una serie de preguntas que refieren a la vivienda del encuestado. Algunas tienen más que ver con la ubicación de la vivienda (calle, altura, etc.) y servirán para georreferenciar a los encuestados. Otras tienen que ver con las características constructivas de la vivienda (piso, baño, etc) y, por último, otras tendrán que ver con el uso que se le da a esa construcción (hogares/personas que la usan, presencia de ciertos dispositivos, etc.). En algunas encuestas estas preguntas se implementan en otros módulos. Por ejemplo, se realiza un módulo exclusivo para el "hogar" en donde se hacen preguntas para cada miembro del hogar que las suele responder el encuestado en representación de aquellos.

Con este tipo de preguntas se puede construir un indicador relativamente famoso en las ciencias sociales. Estamos hablando del indicador sobre hacimamiento que se puede calcular tanto para viviendas, hogares y personas. Existen varias definiciones operacionales (o criterios de medición) del concepto de hacinamiento aunque como idea general se puede afirmar que en cualquier definición de hacinamiento hay una relación explícita entre la cantidad y tipos de ambientes de la vivienda y la cantidad y tipo de miembros del hogar. Aunque muchas veces quede alga opacada por la discusión del punto de corte, lo que existe por detrás de la definición es la creencia (más o menos justificada según el caso) que el hacinamiento posee riegos asociados con el inadecuado espacio dentro del vivienda para dormir y, más en general, con cualquier actividad que se realice en el hogar. En este sentido la pandemia de COVID-19 puso de relieve no sólo la cuestión de la (falta de) disponibilidad de dispositivos tecnológicos sino también la cuestion de (falta de) disponibilidad de espacio para realizar algunas tareas en la casa como el trabajo y/o el estudio.

Es interesante destacar que no sólo importa el "punto de corte" a partir del cual se considera hacinamiento (¿2 personas por ambiente?, ¿3 por ambiente?) sino también:

a\) el tipo de ambiente (¿se usa para dormir?) y

b\) el tipo de miembros (no es lo mismo una "pareja" que 2 hermanos de diferente sexo entre 12 y 17 años ...aunque en ambos casos la cantidad sea 2).

En Argentina históricamente se le ha dado más importancia al tipo de ambiente pero en Europa desde hace varias décadas también se calcula en base al tipo de miembros del hogar.

Idealmente, la cuestión del punto de corte más que consensuarse y explicitarse (como lo suguiere la típica idea de la definición operacional) debería justificarse en base a investigaciones empíricas que validen que ese criterio utilizado es mejor que otros criterios alternativos/competidores en cuanto a predecir algún valor considerado como "gold standard" en el mediano/largo plazo. Esto es un ejemplo de lo que se suele denominar **validación de criterio** en las ciencias sociales.

```{r}
tb_n_personas <- df_encuesta |>
select(viv_n_ambientes, viv_n_amb_dormir, viv_amb_estudio, hog_n_miembros_hogar) |>
tbl_summary()

tb_n_personas
```

## Combinando con datos censales

Una de las fuentes secundarias por excelencia, no sólo en Argentina sino en la mayoría de los países, son los Censos nacionales de población. En este caso, utlizaremos los datos del censo del 2010.

```{r}
#| label: insumo_censo

# La idea es agarrar el csv de las personas y convertirlo a parquet file
# Esto lo hago una sola vez y dejo el código pero en próximas corridas sólo se utiliza como insumo el producto del código anterior

library(arrow)
censo_persona_csv <- read_csv(here("Inputs", "PERSONA.csv"))
censo_persona_arrow <- read_csv_arrow(here("Inputs", "PERSONA.csv"))
censo_persona_sav <- read_spss(here("Inputs", "PERSONA.sav"))

 read_csv_arrow()
df_encuesta <- read_rds(here::here("Outputs", "df_encuesta.rds"))
```
